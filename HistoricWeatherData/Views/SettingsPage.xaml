<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:converters="clr-namespace:HistoricWeatherData.Converters"
             x:Class="HistoricWeatherData.Views.SettingsPage"
             Title="Settings">

    <!-- BindingContext is set in code-behind via dependency injection -->

    <ScrollView>
        <VerticalStackLayout Padding="16" Spacing="16">

            <!-- Header -->
            <Label Text="API Keys and Settings"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalTextAlignment="Center" />

            <!-- Syncfusion License Key -->
            <Frame CornerRadius="8" Padding="16">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Syncfusion License Key" FontSize="18" FontAttributes="Bold" />

                    <Entry Text="{Binding SyncfusionLicenseKey}"
                           Placeholder="Enter your Syncfusion license key"
                           IsPassword="True" />

                    <Button Text="Save License Key"
                            Command="{Binding SaveSyncfusionKeyCommand}"
                            BackgroundColor="#007ACC"
                            TextColor="White" />
                </VerticalStackLayout>
            </Frame>

            <!-- Weather Provider API Keys -->
            <Frame CornerRadius="8" Padding="16">
                <VerticalStackLayout Spacing="12">
                    <Label Text="Weather Provider API Keys" FontSize="18" FontAttributes="Bold" />

                    <!-- Open Weather Map -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Open Weather Map API Key" FontSize="14" FontAttributes="Bold" />
                        <Entry Text="{Binding OpenWeatherMapKey}"
                               Placeholder="Enter your Open Weather Map API key"
                               IsPassword="True" />
                    </VerticalStackLayout>

                    <!-- Visual Crossing -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="Visual Crossing API Key" FontSize="14" FontAttributes="Bold" />
                        <Entry Text="{Binding VisualCrossingKey}"
                               Placeholder="Enter your Visual Crossing API key"
                               IsPassword="True" />
                    </VerticalStackLayout>

                    <!-- WeatherAPI.com -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="WeatherAPI.com API Key" FontSize="14" FontAttributes="Bold" />
                        <Entry Text="{Binding WeatherAPIKey}"
                               Placeholder="Enter your WeatherAPI.com API key"
                               IsPassword="True" />
                    </VerticalStackLayout>

                    <!-- NASA Power -->
                    <VerticalStackLayout Spacing="8">
                        <Label Text="NASA Power API Key (if required)" FontSize="14" FontAttributes="Bold" />
                        <Entry Text="{Binding NasaPowerKey}"
                               Placeholder="Enter your NASA Power API key"
                               IsPassword="True" />
                    </VerticalStackLayout>

                    <HorizontalStackLayout Spacing="12">
                        <Button Text="Save API Keys"
                                Command="{Binding SaveApiKeysCommand}"
                                BackgroundColor="#28A745"
                                TextColor="White"
                                HorizontalOptions="FillAndExpand" />

                        <Button Text="Clear All"
                                Command="{Binding ClearAllCommand}"
                                BackgroundColor="#DC3545"
                                TextColor="White"
                                HorizontalOptions="FillAndExpand" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Status Message -->
            <Label Text="{Binding StatusMessage}"
                   FontSize="14"
                   TextColor="{Binding IsSuccess, Converter={StaticResource BoolToColorConverter}}"
                   HorizontalTextAlignment="Center" />

            <!-- Information -->
            <Frame CornerRadius="8" Padding="16" BackgroundColor="#F8F9FA">
                <VerticalStackLayout Spacing="8">
                    <Label Text="Information" FontSize="16" FontAttributes="Bold" />

                    <Label Text="• API keys are securely stored in the Windows Registry"
                           FontSize="12" />

                    <Label Text="• Open-Meteo provider doesn't require an API key"
                           FontSize="12" />

                    <Label Text="• Keys are only stored locally and never included in the application code"
                           FontSize="12" />

                    <Label Text="• You can obtain API keys from each provider's website"
                           FontSize="12" />
                </VerticalStackLayout>
            </Frame>

            <!-- Navigation -->
            <Button Text="Back to Weather Data"
                    Command="{Binding GoBackCommand}"
                    BackgroundColor="#6C757D"
                    TextColor="White" />

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>